#!/bin/bash

## check command line args
# quiet flag
if [[ "$*" =~ "-q" ]]; then quiet="true"; fi

# username
if [ -n $1 ]
then
	user=`whoami`
else
	user=$1
fi

# run tests
for test in input-*
do
	if [ ! -f $test ]; then continue; fi

	testName=${test#input-}
	
	if [ -n $quiet ]
	then
		../shortest-path $user-$testName <$test >output-$testName 2>/dev/null
	else
		../shortest-path $user-$testName <$test >output-$testName
	fi

	if [ $? -eq 0 ]
	then
		printf "%-50s PASSED\n" input$testName
	else
		printf "%-50s FAILED\n" input$testName
	fi

done

# run ertls std tests
../shortest-path $user-$testName <input-ref-littleendian   | diff -u - xoutput-ref
../shortest-path $user-$testName <input-bench-littleendian | diff -u - xoutput-bench



